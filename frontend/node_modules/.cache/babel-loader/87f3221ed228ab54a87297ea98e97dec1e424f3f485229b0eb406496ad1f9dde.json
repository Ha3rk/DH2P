{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Downloads\\\\E-web\\\\frontend\\\\src\\\\components\\\\Cart\\\\OrderStatus.jsx\",\n  _s = $RefreshSig$();\nimport { useSnackbar } from 'notistack';\nimport { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { emptyCart } from '../../actions/cartAction';\nimport { clearErrors, getPaymentStatus, newOrder } from '../../actions/orderAction';\nimport Loader from '../Layouts/Loader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OrderStatus = () => {\n  _s();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  const params = useParams();\n  const {\n    shippingInfo,\n    cartItems\n  } = useSelector(state => state.cart);\n  const {\n    loading,\n    txn,\n    error\n  } = useSelector(state => state.paymentStatus);\n  const {\n    loading: orderLoading,\n    order,\n    error: orderError\n  } = useSelector(state => state.newOrder);\n  const totalPrice = cartItems.reduce((sum, item) => sum + item.price * item.quantity, 0);\n  const orderData = {\n    shippingInfo,\n    orderItems: cartItems,\n    totalPrice\n  };\n  useEffect(() => {\n    if (loading === false) {\n      if (txn) {\n        if (txn.status === \"TXN_SUCCESS\") {\n          orderData.paymentInfo = {\n            id: txn.id,\n            status: txn.status\n          };\n          dispatch(newOrder(orderData));\n        } else {\n          enqueueSnackbar(\"Processing Payment Failed!\", {\n            variant: \"error\"\n          });\n          navigate(\"/orders/failed\");\n        }\n      } else {\n        navigate(\"/cart\");\n      }\n    }\n    // eslint-disable-next-line\n  }, [loading]);\n  useEffect(() => {\n    if (orderLoading === false) {\n      if (order) {\n        enqueueSnackbar(\"Order Placed\", {\n          variant: \"success\"\n        });\n        dispatch(emptyCart());\n        navigate(\"/orders/success\");\n      } else {\n        navigate(\"/orders\");\n      }\n    }\n    // eslint-disable-next-line\n  }, [orderLoading]);\n  useEffect(() => {\n    if (error) {\n      enqueueSnackbar(error, {\n        variant: \"error\"\n      });\n      dispatch(clearErrors());\n    }\n    if (orderError) {\n      enqueueSnackbar(orderError, {\n        variant: \"error\"\n      });\n      dispatch(clearErrors());\n    }\n    dispatch(getPaymentStatus(params.id));\n  }, [dispatch, error, orderError, params.id, enqueueSnackbar]);\n  return /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 9\n  }, this);\n};\n_s(OrderStatus, \"KspA6nkWK1IcA9vAbpG7WyZlEtA=\", false, function () {\n  return [useDispatch, useNavigate, useSnackbar, useParams, useSelector, useSelector, useSelector];\n});\n_c = OrderStatus;\nexport default OrderStatus;\nvar _c;\n$RefreshReg$(_c, \"OrderStatus\");","map":{"version":3,"names":["useSnackbar","useEffect","useDispatch","useSelector","useNavigate","useParams","emptyCart","clearErrors","getPaymentStatus","newOrder","Loader","jsxDEV","_jsxDEV","OrderStatus","_s","dispatch","navigate","enqueueSnackbar","params","shippingInfo","cartItems","state","cart","loading","txn","error","paymentStatus","orderLoading","order","orderError","totalPrice","reduce","sum","item","price","quantity","orderData","orderItems","status","paymentInfo","id","variant","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/User/Downloads/E-web/frontend/src/components/Cart/OrderStatus.jsx"],"sourcesContent":["import { useSnackbar } from 'notistack';\nimport { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { emptyCart } from '../../actions/cartAction';\nimport { clearErrors, getPaymentStatus, newOrder } from '../../actions/orderAction';\nimport Loader from '../Layouts/Loader';\n\nconst OrderStatus = () => {\n\n    const dispatch = useDispatch();\n    const navigate = useNavigate();\n    const { enqueueSnackbar } = useSnackbar();\n    const params = useParams();\n\n    const { shippingInfo, cartItems } = useSelector((state) => state.cart);\n\n    const { loading, txn, error } = useSelector((state) => state.paymentStatus);\n    const { loading: orderLoading, order, error: orderError } = useSelector((state) => state.newOrder);\n\n    const totalPrice = cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);\n\n    const orderData = {\n        shippingInfo,\n        orderItems: cartItems,\n        totalPrice,\n    }\n\n    useEffect(() => {\n        if (loading === false) {\n            if(txn) {\n                if (txn.status === \"TXN_SUCCESS\") {\n                    orderData.paymentInfo = {\n                        id: txn.id,\n                        status: txn.status,\n                    };\n    \n                    dispatch(newOrder(orderData));\n    \n                } else {\n                    enqueueSnackbar(\"Processing Payment Failed!\", { variant: \"error\" });\n                    navigate(\"/orders/failed\");\n                }\n            } else {\n                navigate(\"/cart\");\n            }\n        }\n        // eslint-disable-next-line\n    }, [loading])\n\n    useEffect(() => {\n        if (orderLoading === false) {\n            if (order) {\n                enqueueSnackbar(\"Order Placed\", { variant: \"success\" });\n                dispatch(emptyCart());\n                navigate(\"/orders/success\");\n            } else {\n                navigate(\"/orders\");\n            }\n        }\n        // eslint-disable-next-line\n    }, [orderLoading])\n\n    useEffect(() => {\n        if (error) {\n            enqueueSnackbar(error, { variant: \"error\" });\n            dispatch(clearErrors());\n        }\n        if (orderError) {\n            enqueueSnackbar(orderError, { variant: \"error\" });\n            dispatch(clearErrors());\n        }\n        dispatch(getPaymentStatus(params.id));\n    }, [dispatch, error, orderError, params.id, enqueueSnackbar]);\n\n    return (\n        <Loader />\n    );\n};\n\nexport default OrderStatus;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}